{"version":3,"sources":["assets/script/services/utils/utils_common.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import * as _G from '../../system/all_modules';\n\nimport timeFunctions from './utils_time'  // time supportive functions\nimport coordinateFunctions from './utils_coordinate'  // time supportive functions\n\nlet uuidIndex = 1e5; // uuid to set as names of objects => help identifying objects\n\n\n// function to get nodeProps object\nexport const $ = (node: cc.Node, simulationID = 0) => {\n   _.$callCount = (_.$callCount || 0) + 1;\n\n   if (node.name != _G.types.elem.card) simulationID = 0;\n   const props: _G.types.elemProps = node[`props_${simulationID}`] || {};\n   return node[`props_${simulationID}`] = props;\n}\n\n$.clean = (node: cc.Node, simulationID = 0) => {\n   if (simulationID == 0) return;\n   delete node[`props_${simulationID}`];\n}\n\n\nexport const _ = {\n   NO_CONSOLE_LOG: false,\n   // NO_CONSOLE_LOG: true,\n\n   //=== device info\n   isANDROID: (cc.sys.os == cc.sys.OS_ANDROID),\n   isIOS: (cc.sys.os == cc.sys.OS_IOS),\n\n   //--- Math\n   max: Math.max,\n   min: Math.min,\n   round: Math.round,\n   floor: Math.floor,\n   ceil: Math.ceil,\n   sign: Math.sign,\n   abs: Math.abs,\n   pow: Math.pow,\n   random: Math.random,\n   sqrt: Math.sqrt,\n   sin: Math.sin,\n   cos: Math.cos,\n   tan: Math.tan,\n   atan: Math.atan,\n   atan2: Math.atan2,\n   log10: Math.log10,\n   PI: Math.PI,\n\n   randomArrItem(arr: any[], isRemoveItem = false) {\n      const iRandom = Math.floor(Math.random() * arr.length);\n      return (isRemoveItem ? arr.splice(iRandom, 1)[0] : arr[iRandom]);\n   },\n\n   isString(x: any) {\n      return typeof x === 'string';\n   },\n\n   isFunction(functionToCheck: any) {\n      return functionToCheck && {}.toString.call(functionToCheck) === '[object Function]';\n   },\n\n   log(...args: any[]) {\n      if (!this.NO_CONSOLE_LOG) try { console.log(...args) } catch (e) { }\n   },\n\n\n   // ========= Misc\n   getNewUuid() {\n      return uuidIndex++;\n   },\n\n   // ========== array\n   removeArrayItem(arr: any[], item: any) {\n      const index = arr.indexOf(item);\n      if (index != -1) arr.splice(index, 1);\n   },\n\n   addUniqueElemToArr(arr: any[], item: any) {\n      if (arr.includes(item)) return;\n      arr.push(item);\n   },\n\n\n   // ========== numering\n   randomNumber(maxValue: number) {\n      return _.floor(_.random() * maxValue);\n   },\n\n   shuffleArray(arr, isCreateNewArray = false) {\n      const newArr = isCreateNewArray ? [...arr] : arr;\n      newArr.sort(() => this.random() > 0.5 ? 1 : -1);\n      return newArr;\n   },\n\n\n   // ========== positioning\n   directionVec2() {\n      return {\n         top: cc.v2(0, 1),\n         bottom: cc.v2(0, -1),\n         left: cc.v2(-1, 0),\n         right: cc.v2(1, 0),\n      }\n   },\n\n   reservedDir(dir) {\n      return { top: 'bottom', bottom: 'top', left: 'right', right: 'left' }[dir];\n   },\n\n   getGlobalPos(node: cc.Node) {\n      return node.convertToWorldSpaceAR(cc.Vec2.ZERO);\n   },\n\n   getGlobalPosDiff(node1: cc.Node, node2: cc.Node) {\n      return this.getGlobalPos(node2).sub(this.getGlobalPos(node1));\n   },\n\n   setGlobalPosToNode(nodeToSet: cc.Node, targetNode: cc.Node) {\n      const targetGPos = this.getGlobalPos(targetNode);\n      const localPos = nodeToSet.parent.convertToNodeSpaceAR(targetGPos);\n      nodeToSet.setPosition(localPos);\n   },\n\n   setGlobalPos(nodeToSet: cc.Node, targetGPos: cc.Vec2) {\n      const localPos = nodeToSet.parent.convertToNodeSpaceAR(targetGPos);\n      nodeToSet.setPosition(localPos);\n   },\n\n   moveToNewParentKeepPosition(node: cc.Node, newParentNode: cc.Node) {\n      const curNodePos = newParentNode.convertToNodeSpaceAR(this.getGlobalPos(node));\n      node.parent = newParentNode;\n      node.setPosition(curNodePos);\n   },\n\n\n   isGlobalOverlapping(node1: cc.Node, node2: cc.Node) {\n      return cc.Intersection.rectRect(node1.getBoundingBoxToWorld(), node2.getBoundingBoxToWorld());\n   },\n\n\n   // ========= Grpahics Logic\n\n   // example usage:\n   //    var b = bezier([[0, 0, 0], [1, 1, 1], [2, -3, 6]]);\n   //    for (var t = 0; t <= 10; t++) console.log(b(t/10));\n   getBezierPointFunc(pts) {\n      return function (t) {\n         for (var a = pts; a.length > 1; a = b)  // do..while loop in disguise\n            for (var i = 0, b = [], j; i < a.length - 1; i++)  // cycle over control points\n               for (b[i] = [], j = 0; j < a[i].length; j++)  // cycle over dimensions\n                  b[i][j] = a[i][j] * (1 - t) + a[i + 1][j] * t;  // interpolation\n         return a[0];\n      }\n   },\n\n\n   // ========= Nodes\n\n   // copy a node to a parent\n   copyNode(sourceNode: cc.Node | cc.Prefab, targetParent?: cc.Node) {\n      const newNode: cc.Node = cc.instantiate(sourceNode);\n      if (targetParent) newNode.parent = targetParent;\n      return newNode;\n   },\n\n   setOrgProp(node: cc.Node, propName?: string) {\n      const defaultPropArr = ['x', 'y', 'width', 'height', 'opacity'];\n      if (propName) this.addUniqueElemToArr(defaultPropArr, propName);\n      defaultPropArr.map(iPropName => {\n         const orgPropName = `org${this.capitalize(iPropName)}`;\n         node[orgPropName] = node.hasOwnProperty(orgPropName) ? node[orgPropName] : node[iPropName];\n      });\n      if (propName) return node[`org${this.capitalize(propName)}`];\n   },\n\n   // get full path of a node to its highest parent\n   getNodePath(node) {\n      let pathArr = [node.name]\n      let parent = node.parent;\n      let safeCount = 0;\n      while (parent && safeCount++ < 50) {\n         if (!parent.parent) { break; }\n         pathArr.push(parent.name);\n         parent = parent.parent;\n      }\n      return pathArr.reverse().join('/');\n   },\n\n   // make a node strech to connect 2 points. Used to set position & length of a line/wall as configured positions\n   nodeConnect2Points(node, p1: cc.Vec2, p2: cc.Vec2) {\n      const diffVec = p2.sub(p1);\n      node.height = diffVec.mag();\n      node.setPosition(p1.add(diffVec.mul(0.5)));\n      node.angle = 90 + _.radianToDegrees(_.atan2(diffVec.y, diffVec.x));\n   },\n\n   getNodeDistance(node1: cc.Node, node2: cc.Node) {\n      return this.getGlobalPosDiff(node1, node2).mag();\n   },\n\n   // ========================================\n   radianToDegrees(radian) {\n      return radian * 180 / Math.PI;\n   },\n\n   degreesToRadian(degrees) {\n      return degrees * Math.PI / 180;\n   },\n\n   vec2ToAngle(vec2: cc.Vec2) {  //degree\n      return _.radianToDegrees(_.atan2(vec2.y, vec2.x));\n   },\n\n   formatTime(timeInSec) {\n      //let date = new Date(null);\n      //date.setSeconds(timeInSec); // specify value for SECONDS here\n      //return date.toISOString().substr(11, 8);\n      // e.g. 18245sec = 5 hours (5x3600s) 4 mins (4x60s) 5s\n\n      // this.log('timeInSec: ' + timeInSec);\n      let hours: any = _.floor(timeInSec / (60 * 60));\n      let mins: any = _.floor((timeInSec % (60 * 60)) / 60);\n      let secs: any = timeInSec % (60 * 60) % 60;\n\n      if (hours < 10) hours = '0' + hours;\n      if (mins < 10) mins = '0' + mins;\n      if (secs < 10) secs = '0' + secs;\n\n      return hours + ':' + mins + ':' + secs;\n   },\n\n   formatMoney(gold) {\n      // (no suffix), K, M, B, T, aa, ab, ac, ad, ae ...\n      let digits = _.floor(Math.log10(gold)) + 1;\n      if (digits <= 6) {\n         return gold.toLocaleString();\n      }\n\n      // 1M will write as 1000K\n      // 50B will write as 50,000M \n      // baically, get up to >6 digits, then start shifting by 1 suffix\n\n      // divide digits by 3\n      let suffixes = ['K', 'M', 'B', 'T'];\n      let chunks = _.floor((digits - 1) / 3);\n      let startingChar = 'a';\n      let suffix;\n      if (chunks - 2 <= 3) {\n         suffix = suffixes[chunks - 2];\n      } else {\n         suffix = String.fromCharCode(((chunks - 6) / 26) + startingChar.charCodeAt(0)) + String.fromCharCode(((chunks - 6) % 26) + startingChar.charCodeAt(0));\n      }\n\n      let truncatedGold = _.round(gold / _.pow(10, (chunks - 1) * 3));\n\n      return truncatedGold.toLocaleString() + suffix;\n   },\n\n   capitalize(str) {\n      const arr = [...str];\n      arr[0] = arr[0].toUpperCase();\n      return arr.join('');\n   },\n\n   getInRange(num, min, max) {\n      return _.min(_.max(num, min), max);\n   },\n\n\n\n   // ========= Date time & scheduling process\n   ...timeFunctions,\n\n   // ========= cector, position & coordinates\n   ...coordinateFunctions,\n\n\n\n};"]}