{"version":3,"sources":["assets/script/services/extra-components/NestableScrollView_Inner.js"],"names":["cc","Class","ScrollView","properties","m_OuterScrollView","visible","setOuterScrollView","outer","_onTouchMoved","event","captureListeners","enabledInHierarchy","touch","deltaMove","getLocation","sub","getStartLocation","content","isDifferentBetweenSettingAndPlan","_handleMoveLogic","cancelInnerEvents","mag","_touchMoved","target","node","cancelEvent","Event","EventTouch","getTouches","bubbles","type","Node","EventType","TOUCH_CANCEL","simulate","dispatchEvent","_stopPropagationIfTargetIsMe"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;AACN,aAASD,EAAE,CAACE,UADN;AAGNC,EAAAA,UAAU,EAAE;AACTC,IAAAA,iBAAiB,EAAE;AAChB,iBAAS,IADO;AAEhBC,MAAAA,OAAO,EAAE;AAFO;AADV,GAHN;AAUNC,EAAAA,kBAVM,8BAUaC,KAVb,EAUoB;AACvB,SAAKH,iBAAL,GAAyBG,KAAzB;AACF,GAZK;AAcNC,EAAAA,aAAa,EAAE,uBAAUC,KAAV,EAAiBC,gBAAjB,EAAmC;AAC/C,QAAI,CAAC,KAAKC,kBAAV,EAA8B;AAE9B,QAAIC,KAAK,GAAGH,KAAK,CAACG,KAAlB;AACA,QAAIC,SAAS,GAAGD,KAAK,CAACE,WAAN,GAAoBC,GAApB,CAAwBH,KAAK,CAACI,gBAAN,EAAxB,CAAhB;;AAEA,QAAI,KAAKC,OAAT,EAAkB;AACf,UAAI,CAAC,KAAKb,iBAAL,CAAuBc,gCAAvB,CAAwD,IAAxD,CAAL,EAAoE;AACjE,aAAKC,gBAAL,CAAsBP,KAAtB;AACF;AACH;;AAED,QAAI,CAAC,KAAKQ,iBAAV,EAA6B;AAC1B;AACF;;AAED,QAAIP,SAAS,CAACQ,GAAV,KAAkB,CAAtB,EAAyB;AACtB,UAAI,CAAC,KAAKC,WAAN,IAAqBb,KAAK,CAACc,MAAN,KAAiB,KAAKC,IAA/C,EAAqD;AAClD,YAAIC,WAAW,GAAG,IAAIzB,EAAE,CAAC0B,KAAH,CAASC,UAAb,CAAwBlB,KAAK,CAACmB,UAAN,EAAxB,EAA4CnB,KAAK,CAACoB,OAAlD,CAAlB;AACAJ,QAAAA,WAAW,CAACK,IAAZ,GAAmB9B,EAAE,CAAC+B,IAAH,CAAQC,SAAR,CAAkBC,YAArC;AACAR,QAAAA,WAAW,CAACb,KAAZ,GAAoBH,KAAK,CAACG,KAA1B;AACAa,QAAAA,WAAW,CAACS,QAAZ,GAAuB,IAAvB;AACAzB,QAAAA,KAAK,CAACc,MAAN,CAAaY,aAAb,CAA2BV,WAA3B;AACA,aAAKH,WAAL,GAAmB,IAAnB;AACF;AACH;;AACD,SAAKc,4BAAL,CAAkC3B,KAAlC;AACF;AAzCK,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n   extends: cc.ScrollView,\n\n   properties: {\n      m_OuterScrollView: {\n         default: null,\n         visible: false,\n      }\n   },\n\n   setOuterScrollView(outer) {\n      this.m_OuterScrollView = outer;\n   },\n\n   _onTouchMoved: function (event, captureListeners) {\n      if (!this.enabledInHierarchy) return;\n\n      var touch = event.touch;\n      var deltaMove = touch.getLocation().sub(touch.getStartLocation());\n\n      if (this.content) {\n         if (!this.m_OuterScrollView.isDifferentBetweenSettingAndPlan(this)) {\n            this._handleMoveLogic(touch);\n         }\n      }\n\n      if (!this.cancelInnerEvents) {\n         return;\n      }\n\n      if (deltaMove.mag() > 7) {\n         if (!this._touchMoved && event.target !== this.node) {\n            var cancelEvent = new cc.Event.EventTouch(event.getTouches(), event.bubbles);\n            cancelEvent.type = cc.Node.EventType.TOUCH_CANCEL;\n            cancelEvent.touch = event.touch;\n            cancelEvent.simulate = true;\n            event.target.dispatchEvent(cancelEvent);\n            this._touchMoved = true;\n         }\n      }\n      this._stopPropagationIfTargetIsMe(event);\n   }\n});\n"]}