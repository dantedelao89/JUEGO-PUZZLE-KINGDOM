{"version":3,"sources":["assets/script/system/ui-fx/core_fx.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import * as _G from '../../system/all_modules';\nconst { _, $ } = _G;\n\n\nexport const coreFX = {\n   fxContainer: null as cc.Node,\n\n   init() {\n      this.startClockFx();\n      this.fxContainer = cc.find('Canvas/fx_container');\n\n      cc.tween(cc.find('Canvas/layout_home/dialog/game_logo')).repeatForever(\n         cc.tween().by(0.7, { scale: 0.1 }).by(0.7, { scale: -0.1 })\n      ).start();\n   },\n\n   startClockFx() {\n      const clockNode = cc.find('Canvas/play_area/scrollview_master/view/content/grid_area/time_level_bar/play_time/clock');\n      clockNode.angle = 10;\n      cc.tween(clockNode).repeatForever(\n         cc.tween().to(0.5, { angle: -20 }).to(0.5, { angle: 20 })\n      ).start();\n   },\n\n   showVideoError(startPosY) {\n      const sampleNode = cc.find('Canvas/sample_nodes/tooltip_video_err');\n      const fxNode = _.copyNode(sampleNode, this.fxContainer);\n      _G.localize.translateSingleLabel(cc.find('label_fx_video_error', fxNode));\n      fxNode.y = startPosY;\n      fxNode.active = true;\n      cc.tween(fxNode).by(1.5, { opacity: -255, y: 200 }).call(() => fxNode.removeFromParent(true)).start();\n   },\n\n\n   // =============================================\n   // show grid\n\n   showGrid(callback?: Function) {\n      const interval = 0.02;\n      const childNodeArr = _G.mapVisual.gridNode.children;\n      childNodeArr.map((cellNode, index) => {\n         this.showCell(cellNode, interval * index);\n      });\n\n      const timeWait = childNodeArr.length * interval * 1000 + 250;\n      _.setTimeout(() => callback && callback(), timeWait);\n   },\n\n   showCell(cellNode: cc.Node, delay = 0) {\n      const fxTime1 = 0.15;\n      const fxTime2 = 0.08;\n      cellNode.stopAllActions();\n      cellNode.scale = 0;\n      cc.tween(cellNode).delay(delay)\n         .to(fxTime1, { scale: 1.08 })\n         .to(fxTime2, { scale: 1 })\n         .start();\n   },\n\n\n\n   // =============================================\n   // hide grid\n\n   hideGrid(callback?: Function) {\n      const interval = 0.02;\n      const childNodeArr = _G.mapVisual.gridNode.children;\n      childNodeArr.map((cellNode, index) => {\n         this.hideCell(cellNode, interval * index);\n      });\n      const timeWait = childNodeArr.length * interval * 1000 + 400;\n      // _.log(`hideGrid >> timeWait = ${timeWait} // childNodeArr.length=${childNodeArr.length} `);\n      _.setTimeout(() => callback && callback(), timeWait);\n   },\n\n\n   hideCell(cellNode: cc.Node, delay = 0) {\n      const fxTime1 = 0.2;\n      const fxTime2 = 0.15;\n      cellNode.stopAllActions();\n      cc.tween(cellNode).delay(delay)\n         .to(fxTime1, { scale: 1.08 })\n         .to(fxTime2, { scale: 0 })\n         .start();\n   },\n\n\n   onCorrectCellPos(cellNode: cc.Node) {\n      const fxNode = cc.find('correct_tile_fx', cellNode);\n      fxNode.width = cellNode.width;\n      fxNode.height = cellNode.height;\n      fxNode.opacity = 255;\n      cc.tween(fxNode).to(0.6, { opacity: 0 }).start();\n   },\n\n\n   // level icon shine a little to attract attention\n   highlightIconLevel(middleCallback?: Function) {\n      const expProgressBar = cc.find('Canvas/layout_win/dialog/exp_progress_bar');\n      const levelNum = cc.find('level/level_num', expProgressBar);\n      const levelBg = cc.find('level/bg', expProgressBar);\n      const levelLight = cc.find('level/light_effect 1', expProgressBar);\n\n      const anim = cc.tween().by(0.4, { scale: 0.7 }).delay(0.7).by(0.4, { scale: -0.7 });\n      anim.clone(levelNum).start();\n      anim.clone(levelBg).start();\n      cc.tween(levelLight).to(0.4, { opacity: 255 }).delay(0.7).to(0.4, { opacity: 0 }).start();\n\n      _.setTimeout(() => middleCallback && middleCallback(), 400);\n   },\n\n\n   rotateForever(node: cc.Node, angleFactor = 1) {\n      cc.tween(node).repeatForever(cc.tween().by(10, { angle: -360 * angleFactor })).start();\n   },\n\n\n   fxShowPopupHeader(popupNode: cc.Node) {\n      const headerNode = cc.find('dialog/header', popupNode);\n      const lightNode = cc.find('light_fx', headerNode);\n      const starNodeArr = [cc.find('star1', headerNode), cc.find('star2', headerNode), cc.find('star3', headerNode)];\n\n      starNodeArr.map((starNode, i) => {\n         starNode.orgScale = starNode.orgScale || starNode.scale;\n         starNode.stopAllActions();\n         starNode.scale = 0;\n         starNode.angle = 0;\n         _.setTimeout(() => {\n            cc.tween(starNode).delay(i * 0.3).to(0.5, { scale: starNode.orgScale + 0.5, angle: -360 }).by(0.2, { scale: -0.5 }).start();\n         }, 300);\n      });\n\n      lightNode.stopAllActions();\n      lightNode.children[0].stopAllActions();\n      lightNode.orgScale = lightNode.orgScale || lightNode.scale;\n      lightNode.scale = 0;\n      _.setTimeout(() => {\n         this.rotateForever(lightNode);\n         this.rotateForever(lightNode.children[0], -2);\n         cc.tween(lightNode).delay(1).to(0.4, { scale: lightNode.orgScale }).start();\n      }, 300);\n   },\n\n\n   // fx stars fly to star-count at top\n   isPlayingFxStarsAdd: false,\n   isPlayingFxExpAdd: false,\n   fxAddCoins(baseNode: cc.Node, amount) {\n      this.isPlayingFxStarsAdd = true;\n      _.setTimeout(() => this.isPlayingFxStarsAdd = false, 2000);\n\n      _.setTimeout(() => _G.audio.playSound('star_collect'), 1000);\n      const targetNode = cc.find('Canvas/layout_fixed_header/header/star2_big 1');\n      const sampleParticleNode = cc.find('Canvas/sample_nodes/coin');\n\n      // coins fly\n      _G.utilsAnimFx.particlesFlyFromA2B(sampleParticleNode, baseNode, targetNode, null, this.fxContainer);\n\n      // increasing label\n      const labelNode = cc.find('Canvas/layout_fixed_header/header/star2_big 1/label_stars');\n\n      const currentNum = parseInt(labelNode.getComponent(cc.Label).string.replace(/\\D/g, ''));\n      _G.utilsAnimFx.playIncreasingNumberLabel(labelNode, currentNum, amount, 20, 1.2, 1);\n   },\n\n\n   fxAddExp(baseNode: cc.Node, amount) {\n      _.setTimeout(() => _G.audio.playSound('exp_collect'), 1000);\n      const targetNode = cc.find('Canvas/layout_win/dialog/exp_progress_bar/exp_target');\n      const sampleParticleNode = cc.find('Canvas/sample_nodes/exp_icon');\n\n      // coins fly\n      _G.utilsAnimFx.particlesFlyFromA2B(sampleParticleNode, baseNode, targetNode, null, this.fxContainer);\n\n      // increasing label\n      const labelNode = cc.find('Canvas/layout_fixed_header/header/exp_icon/label_exp');\n\n      const currentNum = parseInt(labelNode.getComponent(cc.Label).string.replace(/\\D/g, ''));\n      _G.utilsAnimFx.playIncreasingNumberLabel(labelNode, currentNum, amount, 20, 1.2, 1);\n   },\n\n\n   // animation for winning\n   playWinAnim() {\n      const expFlyTime = 0.5;\n      const expFlyDelay = 0.05;\n      const allExpDelay = 1;\n      const sampleExpNode = cc.find('Canvas/sample_nodes/exp_icon');\n      const expTargetNode = cc.find('time_level_bar/exp_target', _G.coreUI.playGridContainer);\n\n      const cellNodeArr = _G.mapVisual.gridNode.children;\n      cellNodeArr.sort((A, B) => {\n         if (A.cellPos.x != B.cellPos.x) return (A.cellPos.x > B.cellPos.x ? 1 : -1)\n         else return (A.cellPos.y < B.cellPos.y ? 1 : -1)\n      });\n\n      cellNodeArr.map((cellNode, index) => {\n         const expFxNode = _.copyNode(sampleExpNode, this.fxContainer);\n         _.setGlobalPosToNode(expFxNode, cellNode);\n         cc.tween(expFxNode).to(0.3, { opacity: 255 }).delay(index * expFlyDelay + allExpDelay).call(() => {\n            _G.utilsAnimFx.nodeFlyFromAtoB(expFxNode, expTargetNode, expFlyTime, () => {\n               _.setTimeout(() => expFxNode.removeFromParent(true), 300);\n            });\n         }).start();\n      });\n\n      _.setTimeout(() => {\n         _G.audio.playSound('exp_collect');\n      }, (allExpDelay + expFlyTime + 0.2) * 1000);\n\n      _.setTimeout(() => {\n         _G.coreFX.fxShowPopupHeader(cc.find('Canvas/layout_win'));\n         _G.coreUI.showLayoutAnim('layout_win');\n         _G.audio.playSound('puzzlecompleted');\n      }, 2400);\n   },\n\n\n   isPlayingClaimAnim: false,\n   playWinClaimAnim() {\n      if (this.isPlayingClaimAnim) return;\n      this.isPlayingClaimAnim = true;\n\n      const isLevelUp = _G.gameMechanic.isLevelUp;\n      const totalWaitTime = isLevelUp ? 4.1 : 2.2;\n      _G.coreUI.showNagScreen(totalWaitTime);\n\n      // play aimation collect coins & exp\n      _G.coreFX.fxAddCoins(\n         cc.find('Canvas/layout_win/dialog/star_num_base/star2_big 1'),\n         _G.configGame.winCoinReward[_G.gameMechanic.currentSizeMode]\n      );\n\n      _G.coreFX.fxAddExp(\n         cc.find('Canvas/layout_win/dialog/exp_num_base/exp_icon'),\n         _G.configGame.winExp\n      );\n\n      // anim progress bar get filled & label level transform\n      _.setTimeout(() => _G.coreUI.updateLevelProgressBar(0.7), 1000);\n      if (isLevelUp) _.setTimeout(() => this.highlightIconLevel(() => _G.coreUI.updateLevelNumber()), 1700);\n\n      // hide layout_win\n      _.setTimeout(() => {\n         _G.coreUI.hideLayoutAnim('layout_win', () => {\n            this.isPlayingClaimAnim = false;\n            const isLevelUp = _G.gameMechanic.checkToShowLevelUp();\n            if (!isLevelUp) _G.gameMechanic.playNextRandomPuzzle();\n         });\n      }, totalWaitTime * 1000);\n   },\n\n}"]}