{"version":3,"sources":["assets/script/system/project_init_comp.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,0CAA4C;AACpC,IAAA,CAAC,GAAQ,EAAE,EAAV,EAAE,CAAC,GAAK,EAAE,EAAP,CAAQ;AAEd,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAE5C;IAA6C,mCAAY;IAAzD;;IA4BA,CAAC;IA3BE,oGAAoG;IACpG,+BAAK,GAAL;QACG,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;IACrB,CAAC;IAED,2CAA2C;IAC3C,gCAAM,GAAN;QAEG,0DAA0D;QAC1D,2EAA2E;QAC3E,IAAM,SAAS,GAAG;YACf,IAAM,SAAS,GAAG,QAAQ,CAAC,cAAc,CAAC,uBAAuB,CAAC,CAAC;YACnE,IAAI,SAAS;gBAAE,SAAS,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;YAChD,EAAE,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;QAC7B,CAAC,CAAA;QACD,CAAC,CAAC,SAAS,CAAC,SAAS,EAAE,oBAAoB,EAAE,EAAE,CAAC,SAAS,EAAE,GAAG,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC;QAE9E,yBAAyB;QACzB,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,cAAM,OAAA,EAAE,CAAC,SAAS,CAAC,SAAS,EAAE,EAAxB,CAAwB,CAAC,CAAC;QAC/D,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,cAAM,OAAA,EAAE,CAAC,SAAS,CAAC,SAAS,EAAE,EAAxB,CAAwB,CAAC,CAAC;QAE/D,mBAAmB;QACnB,KAAK,IAAI,UAAU,IAAI,EAAE;YAAE,IAAI,EAAE,CAAC,UAAU,CAAC,CAAC,IAAI;gBAAE,EAAE,CAAC,UAAU,CAAC,CAAC,IAAI,EAAE,CAAC;QAE1E,uCAAuC;QACvC,EAAE,CAAC,SAAS,CAAC,kBAAkB,CAAC,cAAM,OAAA,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,EAA7B,CAA6B,CAAC,CAAC;IACxE,CAAC;IA3BiB,eAAe;QADnC,OAAO;OACa,eAAe,CA4BnC;IAAD,sBAAC;CA5BD,AA4BC,CA5B4C,EAAE,CAAC,SAAS,GA4BxD;kBA5BoB,eAAe","file":"","sourceRoot":"/","sourcesContent":["import * as _G from '../system/all_modules';\nconst { _, $ } = _G;\n\nconst { ccclass, property } = cc._decorator;\n@ccclass\nexport default class ProjectInitComp extends cc.Component {\n   // *** Needa put these lines in start() to make 'em execute first before all other component onLoads\n   start() {\n      window['_G'] = _G;\n   }\n\n   // ---- Initialize logic for entire project\n   onLoad() {\n\n      // remove loading bg: htmlLoadingBackground (html div tag)\n      // only start after 0.5 secs and (maximum 5 secs passed /or/ avatar loaded)\n      const startFunc = () => {\n         const loadingBg = document.getElementById('htmlLoadingBackground');\n         if (loadingBg) loadingBg.style.display = 'none';\n         _G.analytic.logPageView();\n      }\n      _.waitToRun(startFunc, 'isRealAvatarLoaded', _G.mapVisual, 0.1, 5, startFunc);\n\n      // app event on show/hide\n      cc.game.on(cc.game.EVENT_SHOW, () => _G.appEvents.onAppShow());\n      cc.game.on(cc.game.EVENT_HIDE, () => _G.appEvents.onAppHide());\n\n      // init sub modules\n      for (let moduleName in _G) if (_G[moduleName].init) _G[moduleName].init();\n\n      // add onshow & hide => pause & unpause\n      _G.appEvents.addAppHideCallback(() => _G.gameMechanic.onPause(true));\n   }\n}\n\n"]}