{"version":3,"sources":["assets/script/system/ui-fx/core_ui.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import * as _G from '../../system/all_modules';\nconst _ = _G._;\n\nconst gameState = _G.types.gameState;\n\nimport { bindButtonHandlers } from './bind_button_handlers';\nexport const coreUI = {\n   alertOKCallback: null as Function,\n   tabButtonContainer: null as cc.Node,\n   masterScrollViewNode: null as cc.Node,\n   masterScrollViewComp: null as cc.ScrollView,\n   masterScrollViewContent: null as cc.Node,\n   playGridContainer: null as cc.Node,\n   headerContainer: null as cc.Node,\n   puzzleProgressBar: null as cc.Node,\n   btnHintDisabledNode: null as cc.Node,\n\n   currentState: gameState.category,\n\n   init() {\n      this.adjustUI();\n      this.masterScrollViewNode = cc.find('Canvas/play_area/scrollview_master');\n      this.masterScrollViewComp = this.masterScrollViewNode.getComponent('NestableScrollView_Outer');\n\n      this.masterScrollViewContent = this.playGridContainer = cc.find('view/content', this.masterScrollViewNode);\n      this.playGridContainer = cc.find('grid_area', this.masterScrollViewContent);\n      this.puzzleProgressBar = cc.find('puzzle_progress_bar', this.masterScrollViewContent);\n      this.headerContainer = cc.find('Canvas/layout_fixed_header/header');\n\n      this.tabButtonContainer = cc.find(`size_tabs`, this.playGridContainer);\n      this.btnHintDisabledNode = cc.find('playing_button_bar/btn_hint/disabled', this.playGridContainer);\n\n      this.setupLocalization();\n\n      bindButtonHandlers.run();\n\n      _G.user.addInitCallback(data => {\n         this.setUIPlayState((data.isNewUser || _G.user.isPuzzleSpecified) ? gameState.playing : gameState.category);\n         cc.tween(this.masterScrollViewNode).to(0.3, { opacity: 255 }).start();\n      });\n\n      this.handleUIForV2();\n      this.fillConfigToUI();\n\n      // if (window['FBInstant']) {\n      //    _G.utilsUI.fillLabel(cc.find('user_bar/label_username', this.headerContainer), FBInstant.player.getName());\n      // }\n   },\n\n\n   showLoadingAds(callBack?: Function) {\n      const layoutNode = cc.find('Canvas/layout_loading_ad');\n      const dialog = cc.find('dialog', layoutNode);\n      dialog.opacity = 0;\n      dialog.x = -dialog.width / 2;\n      layoutNode.active = true;\n      cc.tween(dialog)\n         .to(0.3, { x: 0, opacity: 255 })\n         .delay(2)\n         .to(0.3, { x: dialog.width / 2, opacity: 0 })\n         .call(() => {\n            callBack && callBack();\n            _.setTimeout(() => this.hideLayout('layout_loading_ad'), 100);\n         })\n         .start();\n   },\n\n\n   setupLocalization() {\n      _G.localize.subscribeTranslate(this.headerContainer);\n      _G.localize.subscribeTranslate(cc.find('Canvas/play_area/scrollview_master'));\n      _G.localize.subscribeTranslate(cc.find('Canvas/layout_win'));\n      _G.localize.subscribeTranslate(cc.find('Canvas/layout_level_up'));\n      _G.localize.subscribeTranslate(cc.find('Canvas/layout_settings'));\n      _G.localize.subscribeTranslate(cc.find('Canvas/layout_alert'));\n      _G.localize.subscribeTranslate(cc.find('Canvas/layout_tutorial'));\n      _G.localize.subscribeTranslate(cc.find('Canvas/layout_pause'));\n      _G.localize.subscribeTranslate(cc.find('Canvas/layout_game_over'));\n      _G.localize.subscribeTranslate(cc.find('Canvas/layout_home'));\n      _G.localize.subscribeTranslate(cc.find('Canvas/shares'));\n      _G.localize.subscribeTranslate(cc.find('Canvas/layout_loading_ad'));\n\n      const handleSharePicLabelGlow = () => {\n         const labelGlow = cc.find('Canvas/shares/picture/overlay/text_glow');\n         const labelIntroNode = cc.find('Canvas/shares/picture/label_share_intro_1')\n         cc.find('Canvas/shares').active = true;\n         _.setTimeout(() => {\n            labelGlow.height = (labelIntroNode.height + 30) / labelGlow.scale;\n            labelGlow.width = (_.min(725, labelIntroNode.width + 50)) / labelGlow.scale;\n            cc.find('Canvas/shares').active = false;\n         })\n      }\n      _G.localize.addInitCallback(handleSharePicLabelGlow);\n      _G.localize.languageChangeCallbackArr.push(handleSharePicLabelGlow);\n   },\n\n\n   fillConfigToUI() {\n      // level up stars\n      _G.utilsUI.fillLabel(\n         cc.find('Canvas/layout_level_up/dialog/star_num_base/label_stars'),\n         '' + _G.configGame.levelUpCoinReward\n      );\n\n      // hint stars\n      _G.utilsUI.fillLabel(cc.find('playing_button_bar/btn_hint/label_game_btn_hint/label_stars', this.playGridContainer), '' + _G.configGame.hintCoinPrice);\n      _G.utilsUI.fillLabel(cc.find('label_game_btn_hint/label_stars', this.btnHintDisabledNode), '' + _G.configGame.hintCoinPrice);\n\n      // win coins\n      this.tabButtonContainer.children.map(btnNode => {\n         const coinNumber = _G.configGame.winCoinReward[btnNode.name];\n         _G.utilsUI.fillLabel(cc.find('coin_label', btnNode), '' + coinNumber);\n      });\n   },\n\n\n\n   // users from social posts\n   handleUIForV2() {\n      if (!_G.user.isVersionV2) return;\n      cc.find('btn_back', this.headerContainer).active = true;\n      cc.find('btn_settings', this.headerContainer).x = -255;\n   },\n\n\n   showButtonBack() {\n      cc.find('btn_back', this.headerContainer).active = true;\n   },\n\n   hideButtonBack() {\n      cc.find('btn_back', this.headerContainer).active = false;\n   },\n\n   // =================================================================\n   // UI SIZE ADJUSTMENT\n   // =================================================================\n\n   // adjuts UI to fit\n   adjustUI() {\n      const maxRatio = 720 / 1280;\n      const actualRatio = cc.winSize.width / cc.winSize.height;\n      if (actualRatio > maxRatio) {\n         cc.find('Canvas').getComponent(cc.Canvas).fitWidth = false;\n         cc.find('Canvas').getComponent(cc.Canvas).fitHeight = true;\n      }\n\n      // make layout height = windows height\n      const layoutArr = [\n         'Canvas/play_area',\n         'Canvas/bg',\n         'Canvas/control_layer',\n         'Canvas/layout_win',\n         'Canvas/layout_settings',\n         'Canvas/fx_container',\n         'Canvas/nag_screen',\n         'Canvas/layout_fixed_header',\n         'Canvas/layout_tutorial',\n      ].map(path => {\n         const layerNode = cc.find(path);\n         layerNode.height = cc.winSize.height;\n      });\n   },\n\n\n   // =================================================================\n   // SETUP GAME PLAY STATE: PICK MODE/ PLAYING/ WON\n   // =================================================================\n\n   setUIPlayState(state: _G.types.gameState) {\n      this.currentState = state;\n\n      const btnBack = cc.find('btn_back', this.headerContainer);\n      const btnPlay = cc.find('btn_play', this.playGridContainer);\n      const btnPlayV2 = cc.find('btn_play_v2', this.playGridContainer);\n      const btnShare = cc.find('btn_share', this.playGridContainer);\n\n      const sizeTabsIntro = cc.find('size_tabs_intro', this.playGridContainer);\n      const playingBtnBar = cc.find('playing_button_bar', this.playGridContainer);\n      const playTimeLevelBar = cc.find('time_level_bar', this.playGridContainer);\n      const fakeTimeStack = cc.find('fake_time_stack', this.playGridContainer);\n\n      const gridStack = cc.find('grid_stack', this.playGridContainer);\n      const gridStackBg = cc.find('grid_bg', gridStack);\n      const gridCover = cc.find('grid_cover', gridStack);\n      const dummyStack = cc.find('dummy_stack', this.playGridContainer.parent);\n      const labelMorePuzzle = cc.find('label_game_play_more_puzzle', _G.coreUI.playGridContainer);\n\n      const level = cc.find('level', this.puzzleProgressBar) || {};\n\n      let activeNodeArr, hiddenNodeArr;\n      if (state == gameState.category) {\n         activeNodeArr = [level, dummyStack, btnBack];\n         hiddenNodeArr = [this.playGridContainer, this.puzzleProgressBar, labelMorePuzzle, btnPlayV2, btnShare];\n      }\n\n      else if (state == gameState.pick_mode) {\n         activeNodeArr = [this.playGridContainer, this.tabButtonContainer, sizeTabsIntro, btnPlay, gridCover, btnBack];\n         hiddenNodeArr = [playingBtnBar, playTimeLevelBar, fakeTimeStack, level, this.puzzleProgressBar, dummyStack, labelMorePuzzle, btnPlayV2, btnShare];\n         gridStack.scale = 0.88;\n         gridStackBg.scale = 1;\n      }\n\n      else if (state == gameState.playing || state == gameState.won) {\n         activeNodeArr = [this.playGridContainer, playTimeLevelBar, fakeTimeStack, playingBtnBar, btnBack, level, this.puzzleProgressBar];\n         hiddenNodeArr = [this.tabButtonContainer, sizeTabsIntro, gridCover, btnPlay, dummyStack, labelMorePuzzle, btnPlayV2, btnShare];\n         gridStack.scale = 1;\n         gridStackBg.scale = 1;\n      }\n\n      else if (state == gameState.v2) {\n         activeNodeArr = [this.playGridContainer, btnBack, gridCover, labelMorePuzzle, btnPlayV2, btnShare];\n         hiddenNodeArr = [this.tabButtonContainer, playingBtnBar, this.puzzleProgressBar, level, fakeTimeStack, playTimeLevelBar, sizeTabsIntro, btnPlay, dummyStack];\n         gridStack.scale = 0.994;\n         gridStackBg.scale = 0.98;\n      }\n\n      // set active/ hidden\n      activeNodeArr.map(node => node.active = true);\n      hiddenNodeArr.map(node => node.active = false);\n      if (_G.user.isPuzzleSpecified) {\n         btnBack.active = false;\n      }\n   },\n\n\n\n   // =================================================================\n   // =================================================================\n\n   // --- THE TAB 3x3 & 5x5\n   onTabPreview(size: '3x3' | '4x4' | '5x5' | '6x6') {\n      this.tabButtonContainer.children.map(btnNode => {\n         const isFocus = btnNode.name.includes(size);\n         cc.find('bg_on', btnNode).active = isFocus;\n         cc.tween(btnNode).to(0.2, { scale: isFocus ? 1 : 0.8 }).start();\n      });\n   },\n\n\n   // --- BACK\n   back() {\n      const gMechanic = _G.gameMechanic;\n      if (this.currentState == gameState.category) {\n         _G.coreUI.hideButtonBack();\n         return this.showLayout('layout_home');\n      }\n      if (this.currentState == gameState.pick_mode) return this.setUIPlayState(gameState.category);\n      if (this.currentState == gameState.playing /*|| this.currentState == gameState.won*/) {\n         if (_G.tutorial.isCurrentPuzzleTutorial()) {\n            _G.coreUI.setUIPlayState(_G.types.gameState.category);\n         }\n         else gMechanic.previewGame(gMechanic.currentCategoryName, gMechanic.currentFrameName, 3, 3);\n         // _G.interAd.checkToShowInterAd();\n      }\n   },\n\n\n   // =================================================================\n   // LAYOUTS\n   // =================================================================\n\n   // =======\n   showLayout(layout: cc.Node | string) {\n      const layoutNode: cc.Node = (_.isString(layout) ? cc.find(`Canvas/${layout}`) : layout);\n      layoutNode.active = true;\n   },\n\n   hideLayout(layout: cc.Node | string) {\n      const layoutNode: cc.Node = (_.isString(layout) ? cc.find(`Canvas/${layout}`) : layout);\n      layoutNode.active = false;\n   },\n\n\n   // === with animations\n   showLayoutAnim(layout: cc.Node | string, bgOpacity?) {\n      this.showNagScreen(0.4);\n      const layoutNode: cc.Node = (_.isString(layout) ? cc.find(`Canvas/${layout}`) : layout);\n\n      const dialogNode = cc.find('dialog', layoutNode);\n      const bgNode = cc.find('bg', layoutNode) || cc.find('screen_bg', layoutNode);\n      bgNode.stopAllActions();\n      dialogNode.stopAllActions();\n\n      dialogNode.scale = 0;\n      bgNode.opacity = 0;\n      layoutNode.active = true;\n\n      cc.tween(bgNode).to(0.3, { opacity: bgOpacity || 200 }).start();\n      cc.tween(dialogNode).to(0.3, { scale: 1.03 }).to(0.1, { scale: 1 }).start();\n      this.hideButtonBack();\n   },\n\n   hideLayoutAnim(layout: cc.Node | string, callback?: Function) {\n      this.showNagScreen(0.4);\n      const layoutNode: cc.Node = (_.isString(layout) ? cc.find(`Canvas/${layout}`) : layout);\n\n      const dialogNode = cc.find('dialog', layoutNode);\n      const bgNode = cc.find('bg', layoutNode) || cc.find('screen_bg', layoutNode);\n      layoutNode.active = true;\n\n      bgNode.stopAllActions();\n      dialogNode.stopAllActions();\n\n      cc.tween(bgNode).to(0.3, { opacity: 0 }).start();\n      cc.tween(dialogNode).to(0.2, { scale: 1.06 }).to(0.2, { scale: 0 }).call(() => {\n         layoutNode.active = false;\n      }).call(() => callback && callback()).start();\n      this.showButtonBack();\n   },\n\n\n\n   // ========\n   showAlert(msg, okCallback?: Function) {\n      this.showLayout(\"layer_alert\");\n      _G.utilsUI.fillLabel(cc.find('Canvas/layer_alert/bg_msg/label_msg'), msg);\n      this.alertOKCallback = okCallback;\n   },\n\n   // =======\n   hideLoadingTimer: null,\n   showLoading() {\n      this.showLayout(\"layer_loading\");\n\n      // auto turn off loading if shown more than 10 secs but not being turned off\n      if (this.hideLoadingTimer) clearTimeout(this.hideLoadingTimer);\n      this.hideLoadingTimer = setTimeout(() => this.hideLoading(), 10000);\n   },\n   hideLoading() {\n      this.hideLayout(\"layer_loading\");\n      if (this.hideLoadingTimer) clearTimeout(this.hideLoadingTimer);\n   },\n\n\n   // =========\n   // nag screen: prevent user from clicking buttons while showing animations\n   showNagScreen(timeout?: number) {\n      cc.find('Canvas/nag_screen').active = true;\n      if (timeout) _.setTimeout(() => this.hideNagScreen(), timeout * 1000);\n   },\n   hideNagScreen() {\n      cc.find('Canvas/nag_screen').active = false;\n   },\n\n\n   // ====== Some system labels ================\n   // update gold to all places in game ui\n   updateUserStats(isSkipUpdateUI = false) {\n      // coins\n      if (!isSkipUpdateUI) {\n         _G.utilsUI.fillLabel(\n            cc.find('star2_big 1/label_stars', this.headerContainer),\n            _.formatMoney(_G.user.stars)\n         );\n\n         // exp\n         _G.utilsUI.fillLabel(\n            cc.find('exp_icon/label_exp', this.headerContainer),\n            _.formatMoney(_G.user.exp)\n         );\n      }\n\n      _G.utilsUI.fillLabel(\n         cc.find('Canvas/layout_game_over/dialog/label_gameover_score'),\n         _.formatMoney(_G.user.exp)\n      );\n\n      this.updateBtnHint();\n\n      // level\n      if (!isSkipUpdateUI) {\n         this.updateLevelNumber();\n         this.updateLevelProgressBar();\n      }\n   },\n\n   // button hint on/off\n   updateBtnHint() {\n      this.btnHintDisabledNode.active = _G.user.stars < _G.configGame.hintCoinPrice;\n   },\n\n   updateLevelNumber() {\n      _G.utilsUI.fillLabel(cc.find('Canvas/play_area/scrollview_master/view/content/grid_area/time_level_bar/level/level_num'), '' + _G.user.level);\n      _G.utilsUI.fillLabel(cc.find('Canvas/layout_win/dialog/exp_progress_bar/level/level_num'), '' + _G.user.level);\n   },\n\n\n   // puzzle progress bar\n   updatePuzzleProgressBar(ratio, fxTime = 0) {\n      const progressBar = cc.find('bar', this.puzzleProgressBar);\n      this.updateProgressBar(progressBar, ratio, fxTime);\n   },\n\n\n   // level progress bar\n   updateLevelProgressBar(fxTime = 0) {\n      const progressBar = cc.find('Canvas/layout_win/dialog/exp_progress_bar/bar');\n      const isEven = !(_G.user.exp % _G.configGame.levelUpExp);\n      const ratio = isEven ? 1 : 0.5;\n      this.updateProgressBar(progressBar, ratio, fxTime);\n      _.setTimeout(() => {\n         if (ratio == 1) this.updateProgressBar(progressBar, 0);\n      }, 5000);\n   },\n\n\n   updateProgressBar(barNode: cc.Node, ratio, fxTime = 0) {\n      barNode.orgWidth = barNode.orgWidth || barNode.width;\n\n      const labelPercentage = cc.find('label_percentage', barNode.parent);\n      _G.utilsUI.fillLabel(labelPercentage, `${_.floor(ratio * 100)}%`);\n\n      cc.tween(barNode).to(fxTime, { width: ratio * barNode.orgWidth }).start();\n   },\n}"]}